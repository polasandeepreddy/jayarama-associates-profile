{% extends 'base.html' %}

{% block content %}
<div>
    <!-- Hero Section with 3D Parallax Effect (Full-screen) -->
    <section class="relative bg-gradient-to-br from-slate-900 to-slate-800 text-white min-h-screen overflow-hidden flex items-center">
        <!-- 3D Floating Elements -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute w-72 h-72 bg-amber-500/10 rounded-full -top-32 -left-32 animate-float-slow"></div>
            <div class="absolute w-96 h-96 bg-blue-500/10 rounded-full -bottom-48 -right-32 animate-float-medium"></div>
            <div class="absolute w-64 h-64 bg-green-500/10 rounded-full top-1/2 left-1/4 animate-float-fast"></div>
        </div>
        
        <!-- Animated Grid Background -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute inset-0" style="background-image: linear-gradient(#e5e7eb 1px, transparent 1px), linear-gradient(90deg, #e5e7eb 1px, transparent 1px); background-size: 50px 50px; transform: perspective(500px) rotateX(60deg); animation: gridMove 20s linear infinite;"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <div class="animate-fade-in-up">
                <h1 class="text-5xl md:text-7xl font-bold mb-8 bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent">
                    Our Services
                </h1>
                <p class="text-2xl text-gray-300 max-w-4xl mx-auto leading-relaxed mb-8 [text-align:justify]">
                    We provide comprehensive property valuation solutions tailored to meet the diverse needs of residential, commercial, and industrial sectors. Our services are designed to ensure accuracy, compliance, and clarity in every assessment. With a client-focused approach, we support confident decision-making for financial institutions, investors, and property owners.
                </p>
            </div>
        </div>
    </section>

    <!-- Services Grid with 3D Card Effects -->
    <section class="py-28 bg-gradient-to-br from-gray-50 to-white relative overflow-hidden">
        <!-- Background Animation -->
        <div class="absolute inset-0">
            <div class="absolute w-full h-full" style="background: radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for service in services %}
                <div class="group perspective-1000 service-card" 
                     style="cursor: pointer; height: 400px;">
                    <div class="relative preserve-3d transition-all duration-700 transform-gpu h-full group-hover:rotate-y-180">
                        <!-- Front of Card -->
                        <div class="absolute inset-0 backface-hidden bg-white p-8 rounded-2xl shadow-2xl border border-gray-200 overflow-hidden">
                            <div class="animate-float-on-hover h-full">
                                <div class="relative">
                                    <div class="inline-block p-4 rounded-2xl bg-amber-50 mb-6">
                                        <i data-lucide="{{ service.icon }}" class="h-16 w-16 text-amber-600"></i>
                                    </div>
                                    <div class="absolute inset-0 bg-amber-100/30 rounded-xl scale-110 opacity-0 group-hover:opacity-100 transition-all duration-500 -z-10"></div>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4">{{ service.title }}</h3>
                                <p class="text-gray-600 mb-6 leading-relaxed">{{ service.description }}</p>
                                <div class="flex items-center text-amber-600 font-semibold learn-more-btn">
                                    <span>View More</span>
                                    <svg class="w-4 h-4 ml-2 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <!-- Back of Card -->
                        <div class="absolute inset-0 backface-hidden rotate-y-180 bg-gradient-to-br from-slate-900 to-slate-800 text-white p-8 rounded-2xl shadow-2xl overflow-hidden">
                            <div class="h-full flex flex-col">
                                <!-- Header with Back Button -->
                                <div class="flex justify-between items-start mb-6">
                                    <h4 class="text-xl font-bold text-amber-400">Key Features</h4>
                                    <button class="back-btn flex items-center text-sm text-gray-300 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/10">
                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                        </svg>
                                        Back
                                    </button>
                                </div>
                                
                                <!-- Features List -->
                                <div class="space-y-3 flex-grow">
                                    {% for feature in service.features %}
                                    <div class="flex items-center p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors">
                                        <div class="w-2 h-2 bg-amber-400 rounded-full mr-3 animate-pulse"></div>
                                        <span class="text-sm">{{ feature }}</span>
                                    </div>
                                    {% endfor %}
                                </div>
                                
                                <!-- Get Started Button -->
                                <button onclick="window.location.href='{% url 'contact' %}'" 
                                        class="contact-btn mt-6 px-6 py-3 bg-amber-500 hover:bg-amber-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 w-full">
                                    Get Started
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- CTA Section with Particle Animation -->
    <section class="py-28 bg-gradient-to-br from-amber-500 to-orange-600 relative overflow-hidden">
        <!-- Animated Particles -->
        <div class="absolute inset-0" id="particles-js"></div>
        
        <!-- Floating Shapes -->
        <div class="absolute inset-0">
            <div class="absolute w-64 h-64 bg-white/10 rounded-full -top-32 -left-32 animate-float-slow"></div>
            <div class="absolute w-48 h-48 bg-white/5 rounded-full top-1/2 -right-24 animate-float-medium"></div>
            <div class="absolute w-32 h-32 bg-white/10 rounded-full -bottom-16 left-1/4 animate-float-fast"></div>
        </div>

        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <div class="animate-fade-in-up">
                <h2 class="text-4xl md:text-6xl font-bold text-white mb-8">
                    Need a Custom Valuation Solution?
                </h2>
                <p class="text-xl md:text-2xl text-amber-100 mb-12 leading-relaxed max-w-3xl mx-auto">
                    We understand that every property and situation is unique. Contact us to discuss your specific requirements and receive a tailored valuation solution.
                </p>
                
                <!-- Animated Button -->
                <a href="{% url 'contact' %}" class="group relative inline-flex items-center px-12 py-6 bg-white text-gray-900 font-bold text-xl rounded-2xl shadow-2xl transform hover:scale-105 transition-all duration-300 overflow-hidden">
                    <span class="relative z-10">Request a Consultation</span>
                    <div class="absolute inset-0 bg-gradient-to-r from-amber-400 to-orange-400 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></div>
                    <div class="ml-4 relative z-10 transform group-hover:translate-x-2 transition-transform">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </div>
                </a>
            </div>
        </div>
    </section>
</div>

<style>
    @keyframes float-slow {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(180deg); }
    }
    
    @keyframes float-medium {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-15px) rotate(90deg); }
    }
    
    @keyframes float-fast {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-10px) rotate(45deg); }
    }
    
    @keyframes fade-in-up {
        from { opacity: 0; transform: translateY(50px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes slide-in-left {
        from { opacity: 0; transform: translateX(-50px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes gridMove {
        0% { transform: perspective(500px) rotateX(60deg) translateY(0); }
        100% { transform: perspective(500px) rotateX(60deg) translateY(50px); }
    }
    
    @keyframes scroll {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(10px); opacity: 0; }
    }
    
    .animate-float-slow { animation: float-slow 8s ease-in-out infinite; }
    .animate-float-medium { animation: float-medium 6s ease-in-out infinite; }
    .animate-float-fast { animation: float-fast 4s ease-in-out infinite; }
    .animate-fade-in-up { animation: fade-in-up 1s ease-out; }
    .animate-slide-in-left { animation: slide-in-left 1s ease-out; }
    .animate-scroll { animation: scroll 2s infinite; }
    .animate-ping-slow { animation: ping 3s cubic-bezier(0,0,0.2,1) infinite; }
    .animate-pulse-slow { animation: pulse 4s cubic-bezier(0.4,0,0.6,1) infinite; }
    
    .perspective-1000 { perspective: 1000px; }
    .preserve-3d { transform-style: preserve-3d; }
    .backface-hidden { backface-visibility: hidden; }
    .rotate-y-180 { transform: rotateY(180deg); }
    
    /* Added class for manual rotation */
    .preserve-3d.rotated { transform: rotateY(180deg); }
    
    .group:hover .animate-float-on-hover { transform: translateY(-5px); }
    
    /* Update the hover effect for Learn More button */
    .learn-more-btn:hover svg {
        transform: translateX(8px);
    }
</style>

<script>
    // Store reference to currently rotated card
    let currentRotatedCard = null;

    // Function to handle card rotation
    function rotateCard(cardElement) {
        const preserve3d = cardElement.querySelector('.preserve-3d');
        
        // If clicking the same card that's already rotated, reset it
        if (currentRotatedCard === preserve3d) {
            resetCard(cardElement);
            return;
        }
        
        // Reset any previously rotated card
        if (currentRotatedCard) {
            const previousCard = currentRotatedCard.closest('.service-card');
            resetCard(previousCard);
        }
        
        // Rotate the clicked card
        preserve3d.classList.add('rotated');
        preserve3d.classList.remove('group-hover:rotate-y-180');
        currentRotatedCard = preserve3d;
    }

    // Function to reset a card to its front position
    function resetCard(cardElement) {
        const preserve3d = cardElement.querySelector('.preserve-3d');
        preserve3d.classList.remove('rotated');
        preserve3d.classList.add('group-hover:rotate-y-180');
        
        if (currentRotatedCard === preserve3d) {
            currentRotatedCard = null;
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Add click event listeners to all cards
        document.querySelectorAll('.service-card').forEach(card => {
            card.addEventListener('click', function(e) {
                e.stopPropagation();
                rotateCard(this);
            });
        });

        // Add click event listeners to back buttons
        document.querySelectorAll('.back-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation();
                const card = this.closest('.service-card');
                resetCard(card);
            });
        });

        // Add click event listeners to contact buttons
        document.querySelectorAll('.contact-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation();
                // Let the onclick attribute handle the navigation
            });
        });

        // Close card when clicking outside
        document.addEventListener('click', function() {
            if (currentRotatedCard) {
                const card = currentRotatedCard.closest('.service-card');
                resetCard(card);
            }
        });

        // Prevent closing when clicking inside the card
        document.querySelectorAll('.service-card, .back-btn, .contact-btn, .learn-more-btn').forEach(element => {
            element.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });

        // Simple particle system for CTA section
        const particlesContainer = document.getElementById('particles-js');
        if (particlesContainer) {
            const particleCount = 30;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'absolute rounded-full bg-white/20';
                particle.style.width = `${Math.random() * 20 + 5}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animation = `float-slow ${Math.random() * 10 + 5}s ease-in-out infinite`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                particlesContainer.appendChild(particle);
            }
        }

        // Handle Learn More button click
        document.querySelectorAll('.learn-more-btn').forEach(button => {
            button.addEventListener('click', function(event) {
                event.stopPropagation();
                const card = this.closest('.service-card');
                rotateCard(card);
                
                // Animate the arrow
                const arrow = this.querySelector('svg');
                const preserve3d = card.querySelector('.preserve-3d');
                arrow.style.transform = preserve3d.classList.contains('rotated') 
                    ? 'rotate(90deg)' 
                    : 'translateX(8px)';
            });
        });
    });
</script>
{% endblock %}